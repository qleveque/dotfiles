" Miscellaneous
set confirm-=delete history=100 ic is ls! nofollowlinks hls norunexec novimhelp
set so=4 slowfs=curlftpfs scs sortnumbers wmnu wildstyle=popup syncregs=general
set stl="  %A %10u:%-7g %15s %20d  " syscalls trash undolevels=100 vicmd=$EDITOR
set vifminfo=dhistory,savedirs,chistory,state,tui,shistory,phistory,fhistory,dirstack,registers,bookmarks,bmarks
set timefmt=%m/%d\ %H:%M

" Shortcuts
nnoremap yp :execute '!echo -n %d | xclip -i -sel p -f | xclip -i -sel c'<CR>
nnoremap yW :execute '!echo -n %c:p | xclip -i -sel p -f | xclip -i -sel c'<CR>
nnoremap yw :execute '!echo -n %c | xclip -i -sel p -f | xclip -i -sel c'<CR>
nnoremap I cw<c-a>
nnoremap A cw
nnoremap cc cw<c-u>
nnoremap V ggvG
nnoremap s :sort<CR>
map <C-i> :histnext<CR>
nnoremap <C-q> :execute 'winc t' | quit<CR>
nnoremap <C-w>v <Esc>
nnoremap <CR> :!o "%f"<CR>

" FZF
nnoremap <M-c> :execute 'cd "./'.system('eval $FZF_ALT_C_COMMAND | fzf 2>/dev/tty').'"' | :redraw<CR>
nnoremap <C-t> :execute 'mark x '.system('a=$(eval $FZF_CTRL_T_COMMAND | fzf 2>/dev/tty) && echo \"%d/$a:h\" \"$a:t\"') | :redraw | :normal 'x<CR>
nnoremap <M-p> :execute 'cd "'.system('eval $FZF_P_COMMAND | fzf --exact 2>/dev/tty').'"' | :redraw<CR>
nnoremap <C-p> :execute 'mark x '.system('a=$(eval $FZF_P_COMMAND | fzf --exact 2>/dev/tty) && echo \"$a:h\" \"$a:t\"') | :redraw | :normal 'x<CR>

" Tmux integration
nnoremap <C-b>s :!tmux split-window -v -c %d<CR>
nnoremap <C-b>v :!tmux split-window -h -c %d<CR>

" Commands
command! g :execute 'cd "'.system('set %a && eval $JUMP_TARGET').'"'
command! o :!o "%a"
command! run :!run "%f"

" Style
source ~/.vifm/vifm_devicons/favicons.vifm
highlight Win cterm=none ctermfg=default ctermbg=default
highlight Directory cterm=bold ctermfg=green ctermbg=default
highlight Fifo cterm=bold ctermfg=green ctermbg=default
highlight Executable cterm=none ctermfg=default ctermbg=default
highlight StatusLine cterm=none ctermfg=default ctermbg=default
highlight CmdLine cterm=none ctermfg=default ctermbg=default
highlight ErrorMsg cterm=none ctermfg=red ctermbg=default
highlight Border cterm=none ctermfg=black ctermbg=default
highlight TopLine cterm=none ctermfg=default ctermbg=default
highlight TopLineSel cterm=none ctermfg=default ctermbg=default
